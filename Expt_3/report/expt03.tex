\documentclass{scrartcl}
\usepackage{pgfplots}
\usepackage{makecell}
\usepackage{multirow} % For merged cells
\usepackage{booktabs} % For better table formatting
\usepackage{calc}
\usepackage{Style_File}
\usepackage{circuitikz}
\usepackage{fancyhdr}
\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
% Recommended preamble:
\usetikzlibrary{arrows.meta}
\usetikzlibrary{backgrounds}
\usepgfplotslibrary{patchplots}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{%
    layers/standard/.define layer set={%
        background,axis background,axis grid,axis ticks,axis lines,axis tick labels,pre main,main,axis descriptions,axis foreground%
    }{
        grid style={/pgfplots/on layer=axis grid},%
        tick style={/pgfplots/on layer=axis ticks},%
        axis line style={/pgfplots/on layer=axis lines},%
        label style={/pgfplots/on layer=axis descriptions},%
        legend style={/pgfplots/on layer=axis descriptions},%
        title style={/pgfplots/on layer=axis descriptions},%
        colorbar style={/pgfplots/on layer=axis descriptions},%
        ticklabel style={/pgfplots/on layer=axis tick labels},%
        axis background@ style={/pgfplots/on layer=axis background},%
        3d box foreground style={/pgfplots/on layer=axis foreground},%
    },
}


\setlength{\headheight}{0.75in}
\setlength{\oddsidemargin}{0in}
        \setlength{\evensidemargin}{0in}
        \setlength{\textwidth}{6.5in}
        \setlength{\headwidth}{7.3in}
        \setlength{\textheight}{8.75in}
        \rfoot{\thepage}
        \renewcommand{\headrulewidth}{0pt} % Remove the header line
        \renewcommand{\footrulewidth}{0pt}
\fancyhead[L,C]{}
\fancyhead[L]{PH3204: Experiment 3}
\fancyhead[R]{0\thepage}
\fancyhead[C]{Operational Amplifier}
\fancyfoot[C]{0\thepage}
\fancyfoot[R,L]{}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.4pt}


\usepackage{siunitx}
\usepackage{longtable} 
\usepackage[left = 0.7in,
right = 0.7in,
bottom = 0.9in,
top = 0.9in,
a4paper]{geometry}

\title{
        \Large\textsc{Experiment 03: }
        \huge\textbf{Study of Operational Amplifiers} \\
}


\author{{\Large Sagnik Seth} -\   \texttt{22MS026}\\ ({\small Subgroup - A7}) }
\date{}


\begin{document}
\maketitle
\section{Aim}
\begin{itemize}
    \item Study of op-Amp as inverting and non-inverting amplifiers.
    \item Study of application of op-Amp as adder and subtractor.
\end{itemize}
\section{Theory}
An operational amplifier is a differential amplifier, which takes two voltage inputs and amplifies the difference between them. An ideal op-Amp has infinite input impedance, zero output impedance and large open loop voltage gain $\mathcal{A}_v^{(o)}$. For the open loop, if $v_+$ and $v_-$ are the voltages at the two input terminals of the op-Amp, we have the output voltage as: $$v_{\text{out}} = \mathcal{A}_v^{(o)}(v_+-v_-)$$
The output of an op-Amp cannot be arbitrarily high and is limited by the power supply. After a certain point, the output saturates. Op-Amp is very useful in performing mathematical calculations like arithmetic operations, differentiation, integration, etc.  
\begin{figure}[H]
    \centering
    \includesvg[width=0.5\textwidth]{LM741_Pinout_Square.svg}
    \caption{Real 8 pin op-Amp showing the pin configurations}
\end{figure}
\noindent 
The op-Amp used in this experiment is the LM741, which is an 8 pin IC. The pin configuration of the LM741 is shown above.\\[0.3cm]
\input{inverting_circ}
\input{non-inverting_circ}
\input{adder_circ}
\input{subtractor_circ.tex}
\section{Data and Calculation}
\begin{table}[h!]
    \centering
    \small % Reduce font size for better fit
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{3}{|c|}{$\mathrm{R_i} = \SI{1}{k\ohm}$, $\mathrm{R_f} = \SI{2.2}{k\Omega}$} & 
    \multicolumn{3}{c|}{$\mathrm{R_i} = \SI{1}{k\Omega}$, $\mathrm{R_f} = \SI{10}{k\Omega}$} & 
    \multicolumn{3}{c|}{$\mathrm{R_i} = \SI{10}{k\Omega}$, $\mathrm{R_f} = \SI{22}{k\Omega}$} & 
    \multicolumn{3}{c|}{$\mathrm{R_i} = \SI{2.2}{k\Omega}$, $\mathrm{R_f} = \SI{10}{k\Omega}$} \\ \hline
    {$\mathrm{V_{\text{in}}}$ (V)} & {$\mathrm{V_{\text{out}}}$ (V)} & {Gain} & 
    {$\mathrm{V_{\text{in}}}$ (V)} & {$\mathrm{V_{\text{out}}}$ (V)} & {Gain} & 
    {$\mathrm{V_{\text{in}}}$ (V)} & {$\mathrm{V_{\text{out}}}$ (V)} & {Gain} & 
    {$\mathrm{V_{\text{in}}}$ (V)} & {$\mathrm{V_{\text{out}}}$ (V)} & {Gain} \\ \hline
    0.0    & 0.02  & \textemdash{} & 0.0    & 0.12  & \textemdash{} & 0.0    & 0.02  & \textemdash{} & 0.0    & 0.05  & \textemdash{} \\ \hline
    0.5  & 1.22  & 2.44  & 0.2  & 2.26  & 11.3  & 0.5  & 1.32  & 2.64  & 0.2  & 1.07  & 5.35  \\ \hline
    1.0    & 2.35  & 2.35  & 0.4  & 4.56  & 11.4  & 1.0    & 2.38  & 2.38  & 0.4  & 2.24  & 5.6   \\ \hline
    1.5  & 3.39  & 2.26  & 0.6  & 6.91  & 11.5  & 1.5  & 3.53  & 2.35  & 0.6  & 2.92  & 4.87  \\ \hline
    2.0   & 4.56  & 2.28  & 0.8  & 8.91  & 11.1  & 2.0    & 4.54  & 2.27  & 0.8  & 3.99  & 4.99  \\ \hline
    2.5  & 5.64  & 2.26  & 1.0  & 10.52 & 10.5  & 2.5  & 5.67  & 2.27  & 1.0  & 4.70  & 4.70  \\ \hline
    3.0    & 6.77  & 2.26  & 1.2  & 12.67 & 10.6  & 3.0  & 6.89  & 2.30  & 1.2  & 5.90  & 4.92  \\ \hline
    3.5  & 7.85  & 2.24  & 1.4  & 13.20 & 9.43  & 3.5  & 7.90  & 2.26  & 1.4  & 6.76  & 4.83  \\ \hline
    4.0    & 8.97  & 2.24  &      &       &       & 4.0  & 9.00  & 2.25  & 1.6  & 7.46  & 4.66  \\ \hline
    4.5  & 10.02 & 2.23  &      &       &       & 4.5  & 10.13 & 2.25  & 1.8  & 8.61  & 4.78  \\ \hline
    5.0    & 11.09 & 2.22  &      &       &       & 5.0  & 11.22 & 2.24  & 2.0  & 9.45  & 4.73  \\ \hline
         &       &       &      &       &       & 5.5  & 12.52 & 2.28  & 2.2  & 10.47 & 4.76  \\ \hline
         &       &       &      &       &       & 6.0  & 13.25 & 2.21  & 2.4  & 11.21 & 4.67  \\ \hline
         &       &       &      &       &       &      &       &       & 2.6  & 12.37 & 4.76  \\ \hline
         &       &       &      &       &       &      &       &       & 2.8  & 13.07 & 4.67  \\ \hline
         &       &       &      &       &       &      &       &       & 3.0  & 13.21 & 4.40  \\ \hline
         \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 2.28} \\ $\mathbf{\mathrm{\frac{R_f}{R_i} = 2.2}}$}}&
         \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 10.84} \\ $\mathbf{\mathrm{\frac{R_f}{R_i} = 10.0}}$}}&
         \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 2.31} \\ $\mathbf{\mathrm{\frac{R_f}{R_i} = 2.2}}$}}&
         \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 4.85} \\ $\mathbf{\mathrm{\frac{R_f}{R_i} = 4.54}}$}}
         \\ \hline
    \end{tabular}
    \caption{Experimental data for different $\mathrm{R_i}$ and $\mathrm{R_f}$ values with average gains for op-Amp as an inverting amplifier.}
    \label{tab:multi_column_table}
\end{table}



\begin{table}[H]
    \centering
    \small
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{3}{|c|}{$\mathrm{R_i} = \SI{2.2}{k\Omega}$, $\mathrm{R_f} = \SI{10}{k\Omega}$} & 
    \multicolumn{3}{c|}{$\mathrm{R_i} = \SI{1}{k\Omega}$, $\mathrm{R_f} = \SI{2.2}{k\Omega}$} & 
    \multicolumn{3}{c|}{$\mathrm{R_i} = \SI{10}{k\Omega}$, $\mathrm{R_f} = \SI{22}{k\Omega}$} \\
    \hline
    \textbf{$V_{\mathrm{in}}$ (V)} & \textbf{$V_{\mathrm{out}}$ (V)} & \textbf{Gain} &
    \textbf{$V_{\mathrm{in}}$ (V)} & \textbf{$V_{\mathrm{out}}$ (V)} & \textbf{Gain} &
    \textbf{$V_{\mathrm{in}}$ (V)} & \textbf{$V_{\mathrm{out}}$ (V)} & \textbf{Gain} \\
    \hline
    0.0    & 0.07  & --    & 0.0    & 0.05  & --    & 0.0    & 0.05  & --    \\\hline
    0.2  & 1.74  & 8.70   & 0.5  & 1.91  & 3.82  & 0.5  & 1.84  & 3.68  \\\hline
    0.4  & 2.60   & 6.50   & 1.0    & 3.31  & 3.31  & 1.0    & 3.55  & 3.55  \\\hline
    0.6  & 3.51  & 5.85  & 1.5  & 4.92  & 3.28  & 1.5  & 5.15  & 3.43  \\\hline
    0.8  & 4.75  & 5.94  & 2.0    & 6.57  & 3.29  & 2.0    & 6.76  & 3.38  \\\hline
    1.0    & 5.71  & 5.71  & 2.5  & 8.24  & 3.30  & 2.5  & 8.39  & 3.36  \\\hline
    1.2  & 6.93  & 5.78  & 3.0    & 9.73  & 3.24  & 3.0    & 10.07 & 3.36  \\\hline
    1.4  & 7.96  & 5.69  & 3.5  & 11.51 & 3.29  & 3.5  & 11.55 & 3.30  \\\hline
    1.6  & 9.07  & 5.67  & 4.0    & 12.93 & 3.23  & 4.0    & 13.06 & 3.27  \\\hline
    1.8  & 10.46 & 5.81  & 4.5  & 14.20  & 3.16  & 4.5  & 14.36 & 3.19  \\\hline
    2.0    & 11.68 & 5.84  &      &       &       &      &       &       \\\hline
    2.2  & 12.68 & 5.76  &      &       &       &      &       &       \\\hline
    2.4  & 13.85 & 5.77  &      &       &       &      &       &       \\\hline
    2.6  & 14.31 & 5.50  &      &       &       &      &       &       \\\hline
    \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 5.76} (removing first \\two anomalous values) \\ ${1+ \mathrm{\frac{R_f}{R_i} = 5.54}}$}}&
    \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 3.32} \\ ${1+ \mathrm{\frac{R_f}{R_i} = 3.2}}$}}&
    \multicolumn{3}{|c|}{\thead{\textbf{Avg Gain: 3.39} \\ ${1+ \mathrm{\frac{R_f}{R_i} = 3.2}}$}} \\
    \hline
    \end{tabular}
    \caption{Experimental data for different $\mathrm{R_i}$ and $\mathrm{R_f}$ values with average gains for op-Amp as a non-inverting amplifier.}
    \label{tab:multi_column_table}
\end{table}



\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|c|c|c|}
    \hline
    $\mathrm{V_1}$ \si{(V)} & $\mathrm{V_2}$ \si{(V)} & $\mathrm{V_3}$ \si{(V)} & \thead{$\mathrm{V_{\text{out}}}\si{(V)}$\\ (measured)} & \thead{$\mathrm{V_1} +\mathrm{V_2}+\mathrm{V_3} $ \\ \si{(V)}} \\ \hline
    0.0    & 0.00    & 0.01 & 0.02 & 0.01 \\ \hline
    1.0    & 1.06 & 1.07 & 3.18 & 3.13 \\ \hline
    1.0    & 0.68 & 1.08 & 2.79 & 2.76 \\ \hline
    1.5  & 1.01 & 1.28 & 3.83 & 3.79 \\ \hline
    1.5  & 0.85 & 0.85 & 3.25 & 3.2  \\ \hline
    2.0    & 1.12 & 1.33 & 4.47 & 4.45 \\ \hline
    2.0    & 2.09 & 1.12 & 5.22 & 5.21 \\ \hline
    2.5  & 1.52 & 1.66 & 5.66 & 5.68 \\ \hline
    3.1  & 1.72 & 2.57 & 7.33 & 7.39 \\ \hline
    3.1  & 2.68 & 2.57 & 8.28 & 8.35 \\ \hline
    3.5  & 2.91 & 2.91 & 9.21 & 9.32 \\ \hline
    4.0    & 2.96 & 3.22 & 9.96 & 10.18 \\ \hline
    4.5  & 3.36 & 2.37 & 10.01 & 10.23 \\ \hline
    4.5  & 4.35 & 2.9  & 11.44 & 11.75 \\ \hline
    5.0    & 2.55 & 2.53 & 9.88 & 10.08 \\ \hline
    \end{tabular}
    \caption{Data Table for op-Amp as an adder}
    \label{tab:voltage_measurements}
    \end{table}
    \noindent
    From the measured output voltage and actual value of the addition between input voltages, we can see that both the values are very close to each other. Thus, we showed the op-Amp as a adder.
    \begin{table}[H]
        \centering
        \begin{tabular}{|c|c|c|c|}
        \hline
        $\mathrm{V_1}$ (\si{V}) & $\mathrm{V_2}$ (\si{V}) & \thead{$\mathrm{V_{\text{out}}}\si{(V)}$\\ (measured)} & $\mathrm{V_2} \sim \mathrm{V_1}$ (\si{V}) \\ \hline
        1.0    & 0.79 & 0.29 & 0.21 \\ \hline
        2.0    & 1.45 & 0.54 & 0.55 \\ \hline
        2.5  & 2.52 & 0.06 & 0.02 \\ \hline
        2.5  & 1.82 & 0.65 & 0.68 \\ \hline
        4.3  & 2.91 & 1.39 & 1.39 \\ \hline
        5.0    & 3.37 & 1.60  & 1.63 \\ \hline
        5.5  & 4.29 & 1.15 & 1.21 \\ \hline
        6.0   & 4.32 & 1.58 & 1.68 \\ \hline
        6.5  & 4.38 & 2.02 & 2.12 \\ \hline
        7.0    & 4.64 & 2.21 & 2.36 \\ \hline
        7.5  & 5.23 & 2.06 & 2.27 \\ \hline
        8.0    & 5.52 & 2.18 & 2.48 \\ \hline
        8.5  & 6.62 & 1.54 & 1.88 \\ \hline
        9.0   & 7.32 & 1.48 & 1.68 \\ \hline
        9.5  & 7.67 & 1.56 & 1.83 \\ \hline
        10.0   & 8.19 & 1.64 & 1.81 \\ \hline
        \end{tabular}
        \caption{Data Table for op-Amp as a subtractor}
        \label{tab:voltage_measurements_diff}
        \end{table}
\noindent
From the measured output voltage and actual value of the different between input voltages, we can see that both the values are very close to each other. Thus, we showed the op-Amp as a subtractor.


\section{Sources of Error}
\section{Discussion and Conclusion} 
\end{document}